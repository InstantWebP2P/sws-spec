{
  "name": "Sws-spec",
  "tagline": "SWS - SecureWebSocket Spec",
  "body": "sws-spec - Secure WebSocket(alias SWS) Spec\r\n========\r\n\r\n## SWS - Nacl public key exchange over WebSocket.\r\n-------------------------------------------------------------------------------------------\r\n\r\n### SWS' handshake process consists of six steps\r\n\r\n1. WebSocket client connect to WebSocketServer,\r\n\r\n2. WebSocket client send ClientHello message to WebSocketServer,\r\n\r\n3. WebSocket server got ClientHello message and send ServerHello message back,\r\n\r\n4. WebSocket client got Server's ServerHello message, then verify ServerHello message, then decide to continue or reject handshake process,\r\n\r\n   a. If WebSocket client grant server's handshake request, then send ClientReady message to Server, then switch to secure-context,  \r\n   \r\n   b. If WebSocket client reject server's handshake request, then close WebSocket client,\r\n\r\n5. WebSocket server got Client's ClientReady message, then verify ClientReady message, then decide to continue or reject handshake process,\r\n\r\n   a. If WebSocket server grant client's handshake request, then switch to secure-context,  \r\n   \r\n   b. If WebSocket server reject client's handshake request, then close WebSocket client,\r\n\r\n6. Both WebSocket client and server run on secure-context, done.\r\n\r\n### All exchanged data format is JSON\r\n\r\n### Client/Server exchanged handshake JSON message define\r\n\r\n* Handshake start ...\r\n* -> ClientHello message, send from client to server\r\n```js\r\n  Version 1: {  \r\n                  version: 1,          // protocol version  \r\n                      opc: 0,          // message opcode as 0    \r\n        client_public_key: byte array, // client side NACL Box public key  \r\n                    nonce: byte array  // client generated 8 bytes of random number  \r\n  }    \r\n  Version 2: {  \r\n                  version: 2,          // protocol version, will request server's public key NACL cert  \r\n                      opc: 0,          // message opcode as 0    \r\n        client_public_key: byte array, // client side NACL Box public key  \r\n                    nonce: byte array  // client generated 8 bytes of random number  \r\n  }\r\n  ```\r\n* <- ServerHello message, send from server to client, which responds to ClientHello message\r\n```js\r\n  Version 1: {  \r\n                  version: 1,          // protocol version  \r\n                      opc: 1,          // message opcode as 1    \r\n        server_public_key: byte array, // server side NACL Box public key  \r\n             s_blackbox_a: byte array  // authenticated-encrypted server-sent's ( nonce(8bytes) + sharekey ) using  \r\n                                       // (server's Box secretkey and (client-sent's Box publickey and nonce(8bytes)))  \r\n  }    \r\n  Version 2: {  \r\n                  version: 2,          // protocol version  \r\n                      opc: 1,          // message opcode as 1    \r\n        server_public_key: byte array, // server side NACL Box public key  \r\n             s_blackbox_a: byte array  // authenticated-encrypted server-sent's ( nonce(8bytes) + sharekey +  \r\n                                       // {cert,requireCert}(utf8 encoded json string) ) using  \r\n                                       // (server's Box secretkey and (client-sent's Box publickey and nonce(8bytes)))  \r\n  }\r\n  ```\r\n* -> ClientReady message, send from client to server, which responds to ServerHello message\r\n```js\r\n  Version 1: {  \r\n                  version: 1,          // protocol version  \r\n                      opc: 2,          // message opcode as 2    \r\n             s_blackbox_a: byte array  // authenticated-encrypted client-sent's ( nonce(8bytes) + sharekey ) using  \r\n                                       // (client's Box secretkey and (server-sent's Box publickey and nonce(8bytes)))  \r\n  }    \r\n  Version 2: {  \r\n                  version: 2,          // protocol version  \r\n                      opc: 2,          // message opcode as 2    \r\n             s_blackbox_a: byte array  // authenticated-encrypted client-sent's ( nonce(8bytes) + sharekey +  \r\n                                       // cert(utf8 encoded json string) ) using  \r\n                                       // (client's Box secretkey and (server-sent's Box publickey and nonce(8bytes)))  \r\n  }\r\n  ```\r\n* Handshake done.  \r\n\r\n### for NACL Cert System define, refer to https://github.com/InstantWebP2P/nacl-cert\r\n\r\n\r\n## License\r\n(The MIT License)\r\n\r\nCopyright (c) 2014-2016 Tom Zhou(iwebpp@gmail.com)\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}